<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.bootcss.com/axios/0.19.0-beta.1/axios.js"></script>
</head>
<body>
{% for (uid,info) in vote_dict.items() %}
<p id="{{uid}}" onclick="myClick({{uid}})">{{info["name"]}} 票数:{{info["vote"]}}</p>
{% endfor %}

</body>
<script>
    function myClick(uid) {
        axios.request({
                url: "/vote/",
                method: "POST",
                data: {"uid": uid},
            }
        ).then(function (res) {
            console.log(res)
        })
    }
    
    function getVote() {
        axios.request({
            url: "/getVote/",
            method: "get"
        }).then(function (res) {
            console.log(res);
            if (res.data !=  ""){
                users = res.data;
                for (let uid in users){
                    let Ele = document.getElementById(uid);
                    Ele.innerText = `${users[uid]["name"]} 票数:${users[uid]["vote"]}`
                }
            }
            getVote()
        })
    }
    window.onload = function () {
        getVote()
    }

</script>
</html>