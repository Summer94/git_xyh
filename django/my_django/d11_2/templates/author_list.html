{% extends 'index.html' %}
{% block css %}
    <style>
        th {
            text-align: center!important;
        }
        .btn a{
            color: white;
        }
    </style>
{% endblock %}
{% block content %}
    <h3>作者信息页面</h3>
{#    <button type="button" class="btn btn-success">#}
{#     <a href="{% url 'app01:add_author' %}">#}
{#         <span class="glyphicon glyphicon-plus"></span>添加作者</a>#}
{#    </button>#}
    <button type="button" class="btn btn-success" data-toggle="modal" data-target="#add_author">
        <span class="glyphicon glyphicon-plus"></span>添加作者
    </button>

    <table class="table table-striped table-bordered table-hover text-center">
        <thead>
        <tr class="info">
            <th>序号</th>
            <th>id</th>
            <th>作者</th>
            <th>年龄</th>
            <th>作品</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        {% for author in author_list %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ author.id }}</td>
                <td>{{ author.name }}</td>
                <td>{{ author.age }}</td>
                <td>{% for book in author.book.all %}
                    {% if forloop.last %}
                        《{{ book.title }}》
                    {% else %}
                        《{{ book.title }}》,
                    {% endif %}
                {% empty %}
                    暂无作品
                {% endfor %}
                </td>
                <td>
                    <a href="{% url 'app01:del_author' %}?id={{ author.id }}">
                        <button type="button" class="btn btn-sm btn-danger" aria-label="Left Align">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>删除
                        </button>
                    </a>
                    |
                    <a href="{% url 'app01:edit_author' %}?id={{ author.id }}">
                        <button type="button" class="btn btn-sm btn-success" aria-label="Left Align">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>编辑
                        </button>
                    </a>
                </td>
            </tr>
        {% endfor %}

        </tbody>
    </table>
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel" id="add_author">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times</span>
                    </button>
                    <h4 class="modal-title" id="gridSystemModalLabel">添加作者</h4>
                </div>
                <div class="modal-body">
                    <form action="{% url 'app01:add_author' %}" method="post" novalidate autocomplete="off">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="book_name">作者姓名</label>
                            <input type="text" class="form-control" id="book_name" name="name"
                                   placeholder="请输入作者姓名">
                        </div>
                        <div class="form-group">
                            <label for="author_age">年龄</label>
                            <input type="text" class="form-control" id="author_age" name="age"
                                   placeholder="请输入作者年龄">
                        </div>
                        <div class="form-group">
                            <label for="book_id">作品</label>
                            <select name="book" id="book_id" class="form-control" multiple>
                                {% for book in book_list %}
                                    <option value="{{ book.id }}">{{ book.title }}</option>
                                {% endfor %}

                            </select>
                        </div>
                        <button type="submit" class="btn btn-default">添加</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
{% endblock %}
